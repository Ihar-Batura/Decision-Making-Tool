(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&i(a)}).observe(document,{childList:!0,subtree:!0});function n(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(s){if(s.ep)return;s.ep=!0;const o=n(s);fetch(s.href,o)}})();function c(t){const{tag:e="div",classes:n=[],id:i,text:s,parent:o}=t,a=document.createElement(e);return n.length>0&&a.classList.add(...n),i&&(a.id=i),s&&(a.textContent=s),o!=null&&o.append(a),a}function U(){const t=c({tag:"header",classes:["header"]}),e=c({tag:"div",classes:["wrapper","header-wrapper"],parent:t});return c({tag:"h1",classes:["logo","header-logo"],text:"Decision Making Tool",parent:e}),t}function z(){return c({tag:"main",classes:["main"]})}function G(){const t=c({tag:"footer",classes:["footer"]}),e=c({tag:"div",classes:["wrapper","footer-wrapper"],parent:t});c({tag:"p",classes:["footer-date"],text:"Â© 2025",parent:e});const n=c({tag:"a",classes:["footer-link"],text:"Ihar Batura",parent:e});return n.setAttribute("href","https://github.com/Ihar-Batura"),n.setAttribute("target","_blank"),t}function M(){for(;m.firstChild;)m.removeChild(m.firstChild)}function L(){const t=localStorage.getItem("OptionsListDMT");return t!==null?JSON.parse(t):null}function T({list:t,lastId:e}){const n={list:t,lastId:e};t.length===0&&(n.lastId=0),localStorage.setItem("OptionsListDMT",JSON.stringify(n))}function K(){L()===null&&T({list:[{id:"#1",title:"",weight:""}],lastId:1})}function A(t){const{type:e,classes:n=[],id:i,value:s,title:o,required:a,placeholder:r,minLength:l,min:d,pattern:h,addRules:C,onInput:g,parent:b}=t,u=document.createElement("input");return u.setAttribute("type",e),n.length>0&&u.classList.add(...n),i&&(u.id=i),s&&(u.value=s),o&&u.setAttribute("title",o),a&&u.setAttribute("required",""),r&&u.setAttribute("placeholder",r),l&&u.setAttribute("minlength",l),d&&u.setAttribute("min",d),h&&u.setAttribute("pattern",h),C&&u.setAttribute("aria-describedby",C),g&&(u.oninput=g),b!=null&&b.append(u),u}function f(t){const{classes:e=[],id:n,text:i,disabled:s,name:o,onClick:a,parent:r}=t,l=document.createElement("button");return e.length>0&&l.classList.add(...e),n&&(l.id=n),i&&(l.textContent=i),s&&l.setAttribute("disabled",`${s}`),o&&l.setAttribute("name",o),a&&(l.onclick=a),r!=null&&r.append(l),l}function y(t){window.location.hash=`${t}`}function v(){M(),y("#/");const t=I();m.append(t)}function X(t){const e=t.textContent;if(e!==null){const n=L();if(n!==null){const i=n.list.filter(s=>s.id!==e);T({list:i,lastId:n.lastId}),v()}}}function W({parent:t,key:e,value:n}){const i=t.textContent;if(i!==null){const s=L();if(s!==null){const o=s.list,a=s.lastId;o.forEach(r=>{r.id===i&&(e==="Title"&&(r.title=n),e==="Weight"&&(r.weight=n))}),T({list:o,lastId:a})}}}function Y(t){const{id:e,title:n,weight:i}=t,s=c({tag:"div",classes:["option-container"]}),o=c({tag:"div",classes:["option-container-id"],text:e}),a=A({type:"text",classes:["option-container-title"],value:n,placeholder:"Title",onInput:()=>W({parent:o,key:a.placeholder,value:a.value})}),r=A({type:"number",classes:["option-container-weight"],value:i,placeholder:"Weight",onInput:()=>W({parent:o,key:r.placeholder,value:r.value})}),l=f({classes:["btn","option-container-btn"],text:"Delete",onClick:()=>X(o)});return s.append(o,a,r,l),s}function _(){const t=c({tag:"div",classes:["list-options"]});K();const e=L();return e!==null&&e.list.length>0&&e.list.forEach(n=>{const i=Y({id:n.id,title:n.title,weight:n.weight});t.append(i)}),t}function N(t="",e=""){const n=L();if(n!==null){const i=n.list,o=n.lastId+1,a={id:`#${o}`,title:t,weight:`${typeof+e=="number"?e:""}`};i.push(a),T({list:i,lastId:o})}}function Q(){N(),v()}function Z(){T({list:[],lastId:0}),v()}function tt(){const t=L();if(t!==null){const e=document.createElement("a"),n=new Blob([JSON.stringify(t)],{type:"application/json"});e.href=URL.createObjectURL(n),e.download="option-list.json",e.click()}}function et(){const t=document.createElement("input");t.type="file",t.accept=".json",t.click(),t.addEventListener("change",()=>{if(t.files!==null){const e=t.files[0],n=new FileReader;n.readAsText(e),n.onload=function(){const i=n.result;typeof i=="string"&&(localStorage.setItem("OptionsListDMT",i),v())}}})}function F(t){const{classes:e=[],id:n,parent:i}=t,s=document.createElement("dialog");return e.length>0&&s.classList.add(...e),n&&(s.id=n),i!=null&&i.append(s),s}function nt(t){const{classes:e=[],id:n,row:i,parent:s}=t,o=document.createElement("textarea");return e.length>0&&o.classList.add(...e),n&&(o.id=n),i&&o.setAttribute("row",i),s!=null&&s.append(o),o}function w(t){t.close(),O.childNodes.forEach(e=>{e===t&&O.removeChild(t)})}function it(t){const e=t.trim();if(e.length<3)return;const n=e.split(`
`);n.forEach((i,s)=>{const o=i.split(",");if(o.length>1){const a=o.at(-1);if(a){const r=n[s].length-a.length-1,l=n[s].slice(0,r);N(l,a)}}}),v()}function st(){const t=F({classes:["modal-window"]}),e=c({tag:"form",classes:["form"],parent:t}),n=nt({classes:["form-field"],row:"8",parent:e});return n.setAttribute("placeholder",`Paste a list of new options in a CSV-like format:

Title,1                 -> | Title                 | 1 |
Title with whitespace,2 -> | Title with whitespace | 2 |
Title , with , commas,3 -> | Title , with , commas | 3 |
Title with "quotes",4   -> | Title with "quotes"   | 4 |
Title with number 1,5   -> | Title with number 1   | 5 |`),f({classes:["btn","form-btn","form-btn-cancel"],text:"Cancel",parent:e}).addEventListener("click",function(a){a.preventDefault(),w(t)}),f({classes:["btn","form-btn","form-btn-confirm"],text:"Confirm",parent:e}).addEventListener("click",function(a){a.preventDefault(),it(n.value),w(t)}),document.addEventListener("keydown",a=>{a.key==="Escape"&&w(t)}),document.addEventListener("click",a=>{const r=a.target;if(!(r instanceof HTMLElement))return;r.classList.contains("modal-window")&&w(t)}),t}function ot(){const t=st();O.append(t),t.showModal()}function B(){const t=L();return t===null||t.list.length<2?[]:t.list.filter(i=>i.title.length>0&&+i.weight>0)}function at(){const t=F({classes:["modal-window","modal-valid-options"]}),e=c({tag:"div",classes:["modal-valid-options-container"],parent:t});return c({tag:"div",classes:["modal-valid-options-message"],text:"Please add at least 2 valid options. An option is considered valid if its title is not empty and its weight is greater than 0",parent:e}),f({classes:["btn","btn-close"],text:"Close",parent:e}).addEventListener("click",function(i){i.preventDefault(),w(t)}),document.addEventListener("keydown",i=>{i.key==="Escape"&&w(t)}),document.addEventListener("click",i=>{const s=i.target;if(!(s instanceof HTMLElement))return;s.classList.contains("modal-window")&&w(t)}),t}function lt(){v(),y("#/")}function E(){const t=localStorage.getItem("SoundValueDMT");return t!==null?JSON.parse(t):null}function P({sound:t}){const e={sound:t};localStorage.setItem("SoundValueDMT",JSON.stringify(e))}function rt(t){t.classList.toggle("mute"),E()!==null&&(t.classList.contains("mute")?P({sound:!1}):P({sound:!0}))}function ct(){E()===null&&P({sound:!0})}function dt(t){const e=E();e!==null&&(e.sound===!1?t.classList.add("mute"):t.classList.remove("mute"))}function ut(t,e){t>=5?e.classList.remove("show"):e.classList.add("show")}const ft=""+new URL("../win.wav",import.meta.url).href;function pt(){const t=E();if(t!==null&&t.sound===!0){const e=new Audio(ft);e.currentTime=0,e.play()}}function mt({btnBack:t,btnSound:e,btnStart:n,timerInput:i,timerImg:s,timerTime:o}){t.setAttribute("disabled"," "),e.setAttribute("disabled"," "),n.setAttribute("disabled"," "),i.setAttribute("disabled"," "),s.setAttribute("disabled"," "),setTimeout(()=>{t.removeAttribute("disabled"),e.removeAttribute("disabled"),n.removeAttribute("disabled"),i.removeAttribute("disabled"),s.removeAttribute("disabled"),pt()},o*1e3)}function ht(){const t=c({tag:"div",classes:["buttons-decision-container"]}),e=c({tag:"div",classes:["hint"],text:"!!! The value must be greater than or equal to 5 ",parent:t}),n=f({classes:["btn","btn-back"],name:"Back",onClick:()=>lt(),parent:t}),i=c({tag:"div",classes:["timer-container"],parent:t}),s=c({tag:"div",classes:["timer-img"],parent:i}),o=A({type:"number",classes:["timer-input"],value:"10",placeholder:"Seconds",min:"5",parent:i});ct();const a=f({classes:["btn","btn-sound"],name:"Turn Sound",onClick:()=>rt(a),parent:t});dt(a);const r=f({classes:["btn","btn-start"],text:"Start",parent:t});return r.addEventListener("click",function(l){l.preventDefault();const d=+o.value;ut(d,e),d>=5&&mt({btnBack:n,btnSound:a,btnStart:r,timerInput:o,timerImg:s,timerTime:d})}),t}function gt(t){const{classes:e=[],id:n,width:i=300,height:s=150,parent:o}=t,a=document.createElement("canvas");return e.length>0&&a.classList.add(...e),i&&(a.width=i),s&&(a.height=s),n&&(a.id=n),o!=null&&o.append(a),a}const p={x:256,y:256},R=240,bt=30,k=2;function H(t){t.beginPath(),t.arc(p.x,p.y,R,0,2*Math.PI),t.fillStyle="#b653ed",t.fill(),t.lineWidth=k,t.strokeStyle="#dad5ef",t.stroke()}function q(t){t.beginPath(),t.moveTo(272,0),t.lineTo(p.x,35),t.lineTo(240,0),t.lineTo(p.x,8),t.lineTo(272,0),t.fillStyle="red",t.fill(),t.lineWidth=k,t.strokeStyle="#dad5ef",t.stroke()}function x(t){t.beginPath(),t.arc(p.x,p.y,bt,0,2*Math.PI),t.fillStyle="#532d68",t.fill(),t.lineWidth=k,t.strokeStyle="#dad5ef",t.stroke()}function wt(t,e,n,i){const s=e.length<12?e:`${e.slice(0,12)}...`;t.save(),t.translate(p.x,p.y),t.rotate((n+i)/2),t.textAlign="start",t.font="16px Merienda",t.fillStyle="#fafcfd",t.shadowColor="black",t.shadowBlur=8,t.shadowOffsetX=5,t.shadowOffsetY=5,t.fillText(s,90,5),t.restore()}function J(t,e,n,i,s){const o=e;let a=0;o.forEach(d=>{a+=+d.weight});let r=0,l=0;for(let d=0;d<o.length;d+=1){const C=+o[d].weight/a;l+=C;const g=Math.PI*2*r+i,b=Math.PI*2*l+i;r=l,t.beginPath(),t.moveTo(p.x,p.y),t.arc(p.x,p.y,R-k,g,b);const u=n[d];if(t.fillStyle=u,t.fill(),t.closePath(),t.lineWidth=k,t.strokeStyle="#dad5ef",t.stroke(),b-g>=.185){const S=o[d].title;wt(t,S,g,b)}if(s){const S=6.283185307179586,D=4.71238898038469;g%S<=D&&b%S>=D&&(s.textContent=o[d].title)}}}function Lt(t,e,n,i,s){s.classList.remove("winner");const a=+i.value*1e3;let r=.01,l=.05;function d(){if(r!==0){r+=l;const h=r;H(t),J(t,e,n,h,s),x(t),q(t),requestAnimationFrame(d)}}d(),setTimeout(()=>{Math.random()>.5?l=.2:l=.25},a/5),setTimeout(()=>{Math.random()>.5?l=.4:l=.35},a/2),setTimeout(()=>{Math.random()>.5?l=.15:l=.1},a-1500),setTimeout(()=>{r=0,s.classList.add("winner")},a)}function vt(t,e,n,i,s){const o=gt({classes:["wheel-canvas"],width:512,height:512}),a=o.getContext("2d");return a!==null&&(H(a),J(a,t,e,0),x(a),q(a),n!==null&&i!==null&&n.addEventListener("click",l=>{l.preventDefault(),+i.value>=5&&Lt(a,t,e,i,s)})),o}function $(t,e){return Math.floor(t+Math.random()*(e-t))}function kt(t){const e=[],n=[],i=t.length;for(let s=0;s<i;s+=1){const o=$(0,i);n.includes(o)?s--:(n.push(o),e.push(t[o]))}return e}function Ot(){const t=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"];let e="#";for(let n=0;n<6;n+=1){const i=$(0,15);e+=t[i]}return e}function Tt(t){const e=[];for(let n=0;n<t;n+=1){const i=Ot();e.push(i)}return e}function j(){const t=c({tag:"div",classes:["wrapper","main-wrapper"]}),e=ht(),n=c({tag:"div",classes:["picked-option"],text:"PRESS START BUTTON"}),i=B(),s=kt(i),o=Tt(i.length),a=e.lastChild;if(!(a instanceof HTMLButtonElement))throw new Error("lastChild isn't HTMLButtonElement");const r=a,l=e.childNodes[2].lastChild;if(!(l instanceof HTMLInputElement))throw new Error("isInputElement isn't HTMLInputElement");const h=vt(s,o,r,l,n);return t.append(e,n,h),t}function Ct(){if(B().length<2){const e=at();O.append(e),e.showModal()}else{M();const e=j();m.append(e),y("/decision-picker")}}function St(){const t=c({tag:"div",classes:["buttons-options-container"]});return f({classes:["btn","btn-add-option"],text:"Add Option",onClick:()=>Q(),parent:t}),f({classes:["btn","btn-paste-list"],text:"Paste list",onClick:()=>ot(),parent:t}),f({classes:["btn","btn-clear-list"],text:"Clear list",onClick:()=>Z(),parent:t}),f({classes:["btn","btn-save-list"],text:"Save list to file",onClick:()=>tt(),parent:t}),f({classes:["btn","btn-load-list"],text:"Load list from file",onClick:()=>et(),parent:t}),f({classes:["btn","btn-go-to-decision-picker"],text:"Go to Decision Picker",onClick:()=>Ct(),parent:t}),t}function I(){const t=c({tag:"div",classes:["wrapper","main-wrapper"]}),e=_(),n=St();return t.append(e,n),t}function yt(){const t=c({tag:"div",classes:["wrapper","main-wrapper"]});return c({tag:"div",classes:["error-message"],text:"Oooops...",parent:t}),c({tag:"div",classes:["error-message"],text:"Something went wrong",parent:t}),f({classes:["btn","btn-error"],text:"Back to main page",onClick:()=>v(),parent:t}),t}function V(){const t=window.location.hash;if(M(),t==="#/"||t===""){const e=I();m.append(e)}if(t==="#/decision-picker")if(B().length>=2){const n=j();m.append(n)}else{const n=I();m.append(n),y("#/")}if(t!=="#/"&&t!=="#/decision-picker"&&t!==""){const e=yt();m.append(e)}}function Et(){window.addEventListener("load",()=>{V()}),window.addEventListener("hashchange",function(){V()})}const O=document.body,At=U(),m=z(),Pt=G();O.append(At,m,Pt);Et();
